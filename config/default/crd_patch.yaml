apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: varnishservices.icm.ibm.com
spec:
  # add vs shortname
  names:
    shortNames:
    - vs
  validation:
    openAPIV3Schema:
      properties:
        metadata:
          properties:
            name:
              type: string
              maxLength: 40
        spec:
          properties:
            deployment:
              properties:
                # must be lowercase, number, "-", or "."
                vclFileConfigMapName:
                  type: string
                  # MUST be ' (single-quote) AND \\ (backslash escaped)
                  pattern: '[a-z0-9\\-.]+'
            service:
              properties:
                # limit number of ports to 1
                ports:
                  type: array
                  maxItems: 1

